<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<script src="system.js"></script>
	</head>
	<body>
		<div id="elm"></div>
		<script>
console.log("Elm", Elm);
console.log("Elm.Main", Elm.Main);
var node = document.getElementById("elm");
var app = Elm.Main.embed(node);
console.log("app:", app);
console.log("app.ports:", app.ports);

app.ports.storeAll.subscribe(function(stories) {
	console.log("[js] storeAll:", stories);
	localStorage.setItem("backlog",stories);
	console.log(localStorage);
});

app.ports.load.subscribe(function() {
	var stories = localStorage.getItem("backlog");
	console.log("[js] load", stories);
	app.ports.loaded.send(stories.split(','));
});

		</script>
	</body>
</html>

