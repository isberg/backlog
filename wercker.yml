
box: node
build:
  steps:
    - script:
        name: install elm locally
        code: |
          npm install elm@0.18.0
    - script:
        name: find elm installation
        code: |
          ls node_modules/elm/Elm-Platform
    - script:
        name: debug elm
        code: |
          ./node_modules/elm/Elm-Platform/elm
          ./node_modules/elm/Elm-Platform/elm make
          
# http://devcenter.wercker.com/docs/workflows
deploy:
  box:
    id: nginx:alpine

  steps:
    - script:
        name: cleanup build result
        code: |
         # rm -rf *
    - script:
      name: debug
      code: echo $USERNAME
      
    # push container as-is
    - internal/docker-push:
        disable-sync: true
        username: $USERNAME
        password: $PASSWORD
        port: 8000
        tag: latest, $WERCKER_GIT_COMMIT, $WERCKER_GIT_BRANCH
        repository: isberg/backlog        
